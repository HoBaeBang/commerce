# 커머스 서비스 고도화 기획안 (데이터·API·화면·플로우 포함)

본 문서는 기존 커머스 서비스에 회원 닉네임/배송지 관리, 소셜 로그인, 판매자 상품 등록 등 신규 요구사항을 반영하기 위해 전체적으로 어떤 점이 어떻게 변경되어야 하는지, 그리고 실제 개발에 필요한 데이터, API, 화면(UI/UX), 전체 플로우를 구체적으로 정리한 실무 지침서입니다.

---

## 1. 기존 서비스 구조 요약

- **회원 기능**: 없음 (비회원 주문 또는 단순 회원 정보만 존재)
- **로그인**: 자체 회원가입/로그인 또는 미구현
- **배송지 관리**: 주문 시 배송지 직접 입력, 저장/관리 불가
- **상품 등록**: 관리자만 가능, 일반 사용자는 상품 등록 불가
- **주문/결제**: 주문 시 배송지, 수령인 정보 직접 입력, 결제만 연동
- **DB/ERD**: USERS 테이블 단순/미구현, 배송지 테이블 없음, 상품/주문 테이블에 유저 연동 약함
- **API**: 회원/배송지/판매자 관련 API 미흡
- **화면**: 상품 목록/상세, 장바구니, 주문/결제 등 최소한의 화면만 존재

---

## 2. 고도화 후 서비스 구조 및 개발 요소

### 2-1. 데이터(어떤 데이터가 어디에 필요/저장되는가)

- **USERS**: 이메일, 이름, 닉네임(필수), 소셜 제공자, provider_id, 권한(일반/판매자/관리자), 가입일, 수정일
- **ADDRESSES**: user_id(FK), address_nickname, zipcode, address, address_detail, is_default, 생성/수정일 (유저별 최대 5개, 1개만 기본)
- **PRODUCTS**: user_id(FK, 판매자), 상품명, 가격, 이미지, 재고, 생성/수정일
- **ORDERS**: user_id(FK, 구매자), address_id(FK, 배송지), 주문일, 상태, 금액, 배송지 정보(스냅샷), 결제정보 등
- **PAYMENTS**: order_id(FK), 결제상태, 결제수단, 금액, 결제일 등

### 2-2. API(어떤 API가 어떤 역할을 하는가)

- **회원/인증**
    - `GET /oauth2/authorization/{provider}`: 소셜 로그인 시작
    - `GET /api/v1/users/me`: 내 정보 조회(닉네임 포함)
    - `POST /api/v1/users/me/nickname`: 닉네임 설정/수정
- **배송지**
    - `GET /api/v1/users/me/addresses`: 내 배송지 목록 조회
    - `POST /api/v1/users/me/addresses`: 배송지 추가
    - `PUT /api/v1/users/me/addresses/{addressId}`: 배송지 수정
    - `DELETE /api/v1/users/me/addresses/{addressId}`: 배송지 삭제
    - `PUT /api/v1/users/me/addresses/{addressId}/default`: 기본 배송지 설정
- **상품**
    - `GET /api/v1/products`: 상품 목록/검색
    - `GET /api/v1/products/{id}`: 상품 상세
    - `POST /api/v1/products`: 상품 등록(판매자)
    - `PUT /api/v1/products/{id}`: 상품 수정(판매자)
    - `DELETE /api/v1/products/{id}`: 상품 삭제(판매자)
    - `GET /api/v1/users/me/products`: 내 상품 목록(판매자)
- **주문/결제**
    - `POST /api/v1/orders`: 주문 생성(배송지, 상품, 결제정보 포함)
    - `GET /api/v1/orders/{id}`: 주문 상세
    - `GET /api/v1/users/me/orders`: 내 주문 목록
    - `POST /api/v1/payments/ready`: 결제 준비(카카오페이 등)
    - `POST /api/v1/payments/approve`: 결제 승인
    - 기타: 주문 취소, 결제 취소 등

### 2-3. 화면(UI/UX)

- **회원/인증**
    - 소셜 로그인 버튼(구글/카카오/네이버)
    - 최초 로그인 시 닉네임/기본 배송지 입력 폼(필수)
    - 마이페이지: 내 정보(닉네임 수정), 내 배송지 관리(목록/추가/수정/삭제/기본설정)
- **상품**
    - 상품 목록/검색, 상품 상세, 장바구니
    - (판매자) 내 상품 관리, 상품 등록/수정/삭제 폼
- **주문/결제**
    - 주문서: 배송지 선택(기본 자동, 변경 가능), 상품/수량/금액 확인, 결제수단 선택
    - 주문 완료/상세, 결제 결과
- **공통**
    - 헤더: 로그인/로그아웃, 마이페이지, 장바구니 등

### 2-4. 전체 사용자/시스템 플로우

#### [A] 회원가입/로그인/초기 정보 입력
1. 사용자는 소셜 로그인(구글/카카오/네이버) 버튼 클릭 → OAuth2 인증
2. 최초 로그인 시 닉네임/기본 배송지 입력 폼 노출 → 입력 완료 시 회원 정보/배송지 저장
3. 로그인 후 마이페이지에서 닉네임/배송지 추가/수정/삭제 가능

#### [B] 상품 탐색/장바구니/주문
1. 사용자는 상품 목록/검색/상세 페이지에서 상품 탐색
2. 원하는 상품을 장바구니에 담고, 주문하기 클릭
3. 주문서에서 기본 배송지 자동 선택(변경 가능), 상품/수량/금액/배송지/결제수단 확인
4. 결제 진행(카카오페이 등) → 결제 성공 시 주문/결제/배송지 정보 DB 저장
5. 주문 완료/상세 페이지에서 내역 확인

#### [C] 판매자 상품 등록/관리
1. 판매자 권한을 가진 사용자는 마이페이지에서 '내 상품 관리' 진입
2. 상품 등록/수정/삭제, 내 상품 목록 확인 가능

#### [D] 기타
- 주문/결제/배송지/상품 등 모든 데이터는 ERD/DDL에 따라 관계형 DB에 저장
- 모든 주요 액션은 API를 통해 프론트-백엔드 연동

---

## 3. 단계별 추진 전략 및 변경 포인트

### [1단계] 회원/인증/닉네임/배송지 관리 도입
- USERS/ADDRESSES 테이블 설계 및 API 구현
- 소셜 로그인 연동, 최초 로그인 시 닉네임/배송지 입력 UX 구현
- 닉네임/배송지 CRUD API 및 프론트 UI 구현

### [2단계] 판매자 상품 등록/관리 기능 도입
- SELLER 권한 부여, PRODUCTS 테이블 user_id(FK) 추가
- 상품 등록/수정/삭제/내 상품 목록 API 및 UI 구현

### [3단계] 주문/결제-배송지 연동 및 전체 통합
- 주문 생성 시 배송지 자동/수동 선택, 주문/결제 API에 배송지 정보 연동
- 마이페이지에서 주문/배송지/상품 통합 관리 UX 구현

---

## 4. 기대 효과
- **회원 경험**: 소셜 로그인, 닉네임, 배송지 관리로 편의성/개인화 강화
- **판매자 경험**: 누구나 상품 등록/판매 가능, 내 상품 관리 용이
- **운영 효율**: 데이터 구조/관계 명확화, 유지보수성 향상
- **서비스 확장성**: 다양한 마케팅/추천/통계 기능 확장 기반 마련

---

## 5. 문서 참고
- 상세 ERD/DDL/API/로드맵은 docs 폴더 내 최신 문서 참고

---

> **이 기획안은 실제 개발 전 전체 구조/흐름, 데이터·API·UI·플로우를 한눈에 파악하고, 실무 개발자가 바로 참고할 수 있는 기준 문서입니다.** 